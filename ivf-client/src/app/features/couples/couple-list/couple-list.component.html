<div class="dashboard-layout">
    <header class="page-header">
        <div class="header-title">
            <h1>Danh sÃ¡ch cáº·p Ä‘Ã´i</h1>
            <span class="subtitle">Quáº£n lÃ½ há»“ sÆ¡ cÃ¡c cáº·p vá»£ chá»“ng</span>
        </div>
        <div class="header-actions">
            <div class="search-box">
                <span class="search-icon">ğŸ”</span>
                <input type="text" [ngModel]="searchTerm()" (ngModelChange)="searchTerm.set($event)"
                    placeholder="TÃ¬m theo tÃªn vá»£/chá»“ng hoáº·c mÃ£ BN..." />
            </div>
            <button class="btn btn-primary" routerLink="/couples/new">
                <span class="icon">â•</span> Táº¡o cáº·p Ä‘Ã´i
            </button>
        </div>
    </header>

    <div class="couples-grid">
        @for (couple of filteredCouples(); track couple.id) {
        <div class="couple-card">
            <div class="couple-header">
                <div class="partner wife">
                    <div class="avatar">ğŸ‘©</div>
                    <div class="info">
                        <span class="name">{{ couple.wife.fullName || 'ChÆ°a cÃ³' }}</span>
                        <span class="code">{{ couple.wife.patientCode || '' }}</span>
                    </div>
                </div>
                <div class="heart">â¤ï¸</div>
                <div class="partner husband">
                    <div class="avatar">ğŸ‘¨</div>
                    <div class="info">
                        <span class="name">{{ couple.husband.fullName || 'ChÆ°a cÃ³' }}</span>
                        <span class="code">{{ couple.husband.patientCode || '' }}</span>
                    </div>
                </div>
            </div>

            <div class="couple-meta">
                <div class="meta-item">
                    <span class="label">Káº¿t hÃ´n:</span>
                    <span class="value">{{ formatDate(couple.marriageDate) || 'â€”' }}</span>
                </div>
                <div class="meta-item">
                    <span class="label">Hiáº¿m muá»™n:</span>
                    <span class="value">{{ couple.infertilityYears || '?' }} nÄƒm</span>
                </div>
            </div>

            <div class="couple-actions">
                <a [routerLink]="['/couples', couple.id, 'cycles', 'new']" class="btn btn-sm btn-success">â• Táº¡o chu
                    ká»³</a>
                <a [routerLink]="['/patients', getWifeId(couple)]" class="btn btn-sm btn-secondary">ğŸ‘ï¸ Vá»£</a>
                <a [routerLink]="['/patients', getHusbandId(couple)]" class="btn btn-sm btn-secondary">ğŸ‘ï¸ Chá»“ng</a>
            </div>
        </div>
        } @empty {
        <div class="empty-state">
            <div class="empty-content">
                <span class="empty-icon">ğŸ’‘</span>
                <p>ChÆ°a cÃ³ cáº·p Ä‘Ã´i nÃ o</p>
                <button class="btn btn-primary" routerLink="/couples/new">Táº¡o cáº·p Ä‘Ã´i má»›i</button>
            </div>
        </div>
        }
    </div>
</div>
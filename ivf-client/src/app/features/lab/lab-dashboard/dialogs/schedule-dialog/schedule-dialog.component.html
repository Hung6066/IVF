<div class="modal-overlay" (click)="close()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
            <h2>üìÖ L·ªãch th·ªß thu·∫≠t</h2>
            <button class="close-btn" (click)="close()">√ó</button>
        </div>
        <form (ngSubmit)="onSubmit()">
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Lo·∫°i th·ªß thu·∫≠t *</label>
                    <select [(ngModel)]="schedule.type" name="type" required class="form-control">
                        <option [value]="ScheduleTypes.RETRIEVAL">Ch·ªçc h√∫t tr·ª©ng (Opu)</option>
                        <option [value]="ScheduleTypes.TRANSFER">Chuy·ªÉn ph√¥i (Transfer)</option>
                        <option [value]="ScheduleTypes.REPORT">B√°o ph√¥i (Report)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Ch·ªçn h·ªì s∆° (Cycle) *</label>
                    <select [(ngModel)]="schedule.cycleId" name="cycleId" required class="form-control"
                        (change)="onCycleChange()">
                        <option value="" disabled>-- Ch·ªçn h·ªì s∆° --</option>
                        @for (cycle of activeCycles; track cycle.id) {
                        <option [value]="cycle.id">
                            {{ cycle.cycleCode }} - {{ cycle.wifeName }}
                        </option>
                        }
                    </select>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Ng√†y th·ª±c hi·ªán *</label>
                        <input type="date" [(ngModel)]="schedule.date" name="date" required class="form-control" />
                    </div>
                    <div class="form-group">
                        <label class="form-label">Gi·ªù *</label>
                        <input type="time" [(ngModel)]="schedule.time" name="time" required class="form-control" />
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">B√°c sƒ© th·ª±c hi·ªán</label>
                    <select [(ngModel)]="schedule.doctorName" name="doctorName" class="form-control">
                        <option value="" disabled>-- Ch·ªçn b√°c sƒ© --</option>
                        @for (doc of doctors; track doc.id) {
                        <option [value]="doc.fullName">
                            {{ doc.fullName }} {{ doc.department ? '- ' + doc.department : '' }}
                        </option>
                        }
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="close()">Hu·ª∑</button>
                <button type="submit" class="btn btn-primary">L√™n l·ªãch</button>
            </div>
        </form>
    </div>
</div>
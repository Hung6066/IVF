<section class="content-section card">
    <div class="section-header">
        <h2>B·∫£ng theo d√µi ph√¥i - {{ currentDate | date:'dd/MM' }}</h2>
        <div class="filters" style="display: flex; gap: 0.5rem;">
            <button class="btn btn-primary btn-sm" (click)="onAdd()">‚ûï Th√™m ph√¥i</button>
            <select [(ngModel)]="filterDay" class="form-control" style="width: auto;">
                <option value="all">T·∫•t c·∫£</option>
                <option value="D3">Ng√†y 3</option>
                <option value="D5">Ng√†y 5</option>
                <option value="D6">Ng√†y 6</option>
            </select>
        </div>
    </div>
    <div class="embryo-grid">
        @for (embryo of filteredEmbryos(); track embryo.id) {
        <div class="embryo-card" [class]="getCardClass(embryo.status)" (click)="onSelect(embryo)">
            <div class="embryo-header">
                <span class="cycle">{{ embryo.cycleCode }}</span>
                <span class="day-badge">{{ embryo.day }}</span>
            </div>
            <div class="embryo-number">#{{ embryo.embryoNumber }}</div>
            <div class="embryo-grade">{{ embryo.grade }}</div>
            <div class="embryo-patient">{{ embryo.patientName }}</div>
            <div class="embryo-status">{{ getStatusName(embryo.status) }}</div>
            @if (embryo.location) {
            <div class="embryo-location">üìç {{ embryo.location }}</div>
            }
        </div>
        } @empty {
        <div class="empty-full">Kh√¥ng c√≥ ph√¥i ƒëang nu√¥i</div>
        }
    </div>
</section>

@if (showDialog) {
<app-embryo-dialog [existingEmbryo]="selectedEmbryo" [activeCycles]="activeCycles" [cryoLocations]="cryoLocations"
    (save)="onSave($event)" (delete)="onDialogDelete($event)" (cancel)="onCancel()">
</app-embryo-dialog>
}
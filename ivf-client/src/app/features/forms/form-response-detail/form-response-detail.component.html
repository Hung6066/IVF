<div class="response-detail-container">
    @if (response && template) {
    <header class="detail-header">
        <div class="header-info">
            <a routerLink="/forms/responses" class="back-link">‚Üê Quay l·∫°i</a>
            <h1>{{ response.formTemplateName }}</h1>
            <div class="meta-info">
                <span class="status-badge" [class]="getStatusClass(response.status)">
                    {{ getStatusLabel(response.status) }}
                </span>
                <span>üìÖ G·ª≠i: {{ response.submittedAt | date:'dd/MM/yyyy HH:mm' }}</span>
                @if (response.patientName) {
                <span>üë§ {{ response.patientName }}</span>
                }
            </div>
        </div>
        <div class="header-actions">
            <button class="btn btn-secondary" (click)="print()">üñ®Ô∏è In</button>
        </div>
    </header>

    <div class="response-content">
        <div class="form-preview-card">
            <h2>N·ªôi dung ph·∫£n h·ªìi</h2>
            <div class="values-grid">
                @for (field of template.fields; track field.id) {
                <div class="value-item" [style.grid-column]="'span ' + getFieldColSpan(field)"
                    [class.col-1]="getFieldColSpan(field) === 1" [class.col-2]="getFieldColSpan(field) === 2"
                    [class.col-3]="getFieldColSpan(field) === 3" [class.col-4]="getFieldColSpan(field) === 4">
                    <label>
                        {{ field.label }}
                        @if (field.isRequired) {
                        <span class="required">*</span>
                        }
                    </label>
                    <div class="value">{{ getFieldDisplayValue(field) }}</div>
                </div>
                }

                @if (!template.fields?.length) {
                <p class="no-data">Kh√¥ng c√≥ tr∆∞·ªùng n√†o</p>
                }
            </div>
        </div>
    </div>
    } @else {
    <div class="loading">
        <div class="spinner"></div>
        <p>ƒêang t·∫£i...</p>
    </div>
    }
</div>
<div class="field-header">
  <div class="drag-handle" cdkDragHandle>‚ãÆ‚ãÆ</div>
  <span class="col-indicator" title="Chi·ªÅu r·ªông c·ªôt">{{ colSpan }}/4</span>
  <button class="clone-btn" (click)="onClone($event)" title="Nh√¢n b·∫£n">üìã</button>
  <button class="delete-btn" (click)="onDelete($event)">üóëÔ∏è</button>
</div>

<div class="field-preview">
  <label>
    {{ field.label }}
    @if (field.isRequired) {
      <span class="required">*</span>
    }
  </label>

  @switch (field.fieldType) {
    @case (FieldType.Text) {
      <input
        type="text"
        [placeholder]="field.placeholder || ''"
        [style.height]="fieldHeight"
        disabled
      />
    }
    @case (FieldType.TextArea) {
      <textarea
        [placeholder]="field.placeholder || ''"
        [style.height]="fieldHeight"
        disabled
      ></textarea>
    }
    @case (FieldType.Number) {
      <input type="number" [placeholder]="field.placeholder || ''" disabled />
    }
    @case (FieldType.Decimal) {
      <input type="number" step="0.01" [placeholder]="field.placeholder || ''" disabled />
    }
    @case (FieldType.Date) {
      <input type="date" disabled />
    }
    @case (FieldType.DateTime) {
      <input type="datetime-local" disabled />
    }
    @case (FieldType.Time) {
      <input type="time" disabled />
    }
    @case (FieldType.Dropdown) {
      <select disabled>
        <option>-- Ch·ªçn --</option>
      </select>
    }
    @case (FieldType.Radio) {
      <div class="radio-preview">
        @for (opt of getOptions(); track opt.value) {
          <label><input type="radio" disabled /> {{ opt.label }}</label>
        }
      </div>
    }
    @case (FieldType.Checkbox) {
      <div class="checkbox-preview">
        @for (opt of getOptions(); track opt.value) {
          <label><input type="checkbox" disabled /> {{ opt.label }}</label>
        }
        @if (getOptions().length === 0) {
          <label><input type="checkbox" disabled /> {{ field.placeholder || 'Checkbox' }}</label>
        }
      </div>
    }
    @case (FieldType.Tags) {
      <div class="tags-preview">
        @if (getOptions().length > 0) {
          @for (opt of getOptions(); track opt.value) {
            <span class="tag-badge">üè∑Ô∏è {{ opt.label }}</span>
          }
        } @else {
          <span class="tags-placeholder">üè∑Ô∏è Ch·ªçn t·ª´ danh s√°ch concepts...</span>
        }
      </div>
    }
    @case (FieldType.Rating) {
      <div class="rating-preview">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
    }
    @case (FieldType.MultiSelect) {
      <select multiple disabled style="min-height: 60px">
        @for (opt of getOptions(); track opt.value) {
          <option>{{ opt.label }}</option>
        }
      </select>
    }
    @case (FieldType.Section) {
      <hr class="section-divider" />
    }
    @case (FieldType.Label) {
      <p class="label-text" style="color: #64748b; font-style: italic">{{ field.label }}</p>
    }
    @case (FieldType.PageBreak) {
      <div class="page-break-preview">
        <div class="page-break-line"></div>
        <span class="page-break-label">üìÑ Ng·∫Øt trang</span>
        <div class="page-break-line"></div>
      </div>
    }
    @case (FieldType.Address) {
      <div class="address-preview">
        @for (sub of getSubFields(); track sub.key) {
          <div class="address-subfield" [style.flex]="'0 0 ' + (sub.width || 100) + '%'">
            <small>{{ sub.label }}</small>
            <input type="text" disabled [placeholder]="sub.label" />
          </div>
        }
        @if (getSubFields().length === 0) {
          <div class="address-subfield" style="flex: 0 0 100%">
            <small>ƒê∆∞·ªùng</small><input type="text" disabled placeholder="ƒê∆∞·ªùng / s·ªë nh√†" />
          </div>
          <div class="address-subfield" style="flex: 0 0 50%">
            <small>Ph∆∞·ªùng/X√£</small><input type="text" disabled placeholder="Ph∆∞·ªùng/X√£" />
          </div>
          <div class="address-subfield" style="flex: 0 0 50%">
            <small>Qu·∫≠n/Huy·ªán</small><input type="text" disabled placeholder="Qu·∫≠n/Huy·ªán" />
          </div>
          <div class="address-subfield" style="flex: 0 0 50%">
            <small>T·ªânh/TP</small><input type="text" disabled placeholder="T·ªânh/TP" />
          </div>
          <div class="address-subfield" style="flex: 0 0 50%">
            <small>Qu·ªëc gia</small><input type="text" disabled placeholder="Qu·ªëc gia" />
          </div>
        }
      </div>
    }
    @case (FieldType.Hidden) {
      <div class="hidden-preview">üëÅÔ∏è‚Äçüó®Ô∏è Tr∆∞·ªùng ·∫©n ‚Äî kh√¥ng hi·ªÉn th·ªã cho ng∆∞·ªùi d√πng</div>
    }
    @case (FieldType.Slider) {
      <input type="range" min="0" max="100" disabled style="width: 100%" />
    }
    @case (FieldType.Calculated) {
      <div class="calculated-preview">üßÆ Gi√° tr·ªã t·ª± ƒë·ªông = <em>c√¥ng th·ª©c t√≠nh</em></div>
    }
    @case (FieldType.RichText) {
      <div class="richtext-preview">üìù Tr√¨nh so·∫°n th·∫£o vƒÉn b·∫£n phong ph√∫ (WYSIWYG)</div>
    }
    @case (FieldType.Signature) {
      <div class="signature-preview">‚úçÔ∏è V√πng k√Ω t√™n</div>
    }
    @case (FieldType.Lookup) {
      <div style="position: relative">
        <input type="text" disabled placeholder="üîç T√¨m ki·∫øm..." style="width: 100%" />
      </div>
    }
    @case (FieldType.Repeater) {
      <div class="repeater-preview">
        <div style="display: flex; gap: 8px; margin-bottom: 4px">
          <input type="text" disabled placeholder="C·ªôt 1" style="flex: 1" />
          <input type="text" disabled placeholder="C·ªôt 2" style="flex: 1" />
        </div>
        <button disabled style="font-size: 12px; color: #3b82f6; background: none; border: none">
          üîÅ + Th√™m d√≤ng
        </button>
      </div>
    }
    @default {
      <input type="text" disabled placeholder="Tr∆∞·ªùng m·ªõi" />
    }
  }

  @if (field.helpText) {
    <small class="help-text">{{ field.helpText }}</small>
  }
</div>

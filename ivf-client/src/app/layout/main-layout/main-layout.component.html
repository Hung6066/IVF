<div class="layout">
  <aside class="sidebar">
    <div class="sidebar-header">
      <span class="logo">ğŸ¥</span>
      <h2 style="color: #ffffff">IVF System</h2>
    </div>

    <nav class="sidebar-nav">
      <a routerLink="/dashboard" routerLinkActive="active" class="nav-item">
        <span class="icon">ğŸ“Š</span> Dashboard
      </a>
      <a
        *ngIf="canView('ViewPatients')"
        routerLink="/reception"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ¥</span> Tiáº¿p Ä‘Ã³n
      </a>
      <a
        *ngIf="canView('ViewPatients')"
        routerLink="/patients"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ‘¥</span> Bá»‡nh nhÃ¢n
      </a>
      <a
        *ngIf="canView('ViewCouples')"
        routerLink="/couples"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ’‘</span> Cáº·p Ä‘Ã´i
      </a>
      <a
        *ngIf="canView('ViewQueue')"
        routerLink="/queue/all"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ«</span> HÃ ng Ä‘á»£i
      </a>
      <a
        *ngIf="canView('ViewCycles')"
        routerLink="/consultation"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ—£ï¸</span> TÆ° váº¥n
      </a>
      <a
        *ngIf="canView('ViewUltrasounds')"
        routerLink="/ultrasound"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ”¬</span> SiÃªu Ã¢m
      </a>
      <a
        *ngIf="canView('ViewLabResults')"
        routerLink="/lab"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ§«</span> PhÃ²ng Lab
      </a>
      <a
        *ngIf="canView('ViewAndrology')"
        routerLink="/andrology"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ”¬</span> Nam khoa
      </a>
      <a
        *ngIf="canView('ViewCycles')"
        routerLink="/injection"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ’‰</span> TiÃªm
      </a>
      <a
        *ngIf="canView('ViewSpermBank')"
        routerLink="/sperm-bank"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ¦</span> NHTT
      </a>
      <a
        *ngIf="canView('ViewPrescriptions')"
        routerLink="/pharmacy"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ’Š</span> NhÃ  thuá»‘c
      </a>
      <a
        *ngIf="canView('ViewBilling')"
        routerLink="/billing"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ’°</span> HoÃ¡ Ä‘Æ¡n
      </a>
      <a
        *ngIf="canView('ViewSchedule')"
        routerLink="/appointments"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ“…</span> Lá»‹ch háº¹n
      </a>
      <a
        *ngIf="canView('ViewReports')"
        routerLink="/reports"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ“ˆ</span> BÃ¡o cÃ¡o
      </a>

      <div
        *ngIf="isAdmin()"
        style="
          margin-top: 16px;
          padding: 0 16px;
          font-size: 0.75rem;
          color: #94a3b8;
          font-weight: 600;
          text-transform: uppercase;
          margin-bottom: 8px;
        "
      >
        Quáº£n trá»‹
      </div>

      <a
        *ngIf="canView('ManageUsers')"
        routerLink="/admin/users"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ‘¥</span> NgÆ°á»i dÃ¹ng
      </a>
      <a *ngIf="isAdmin()" routerLink="/admin/services" routerLinkActive="active" class="nav-item">
        <span class="icon">ğŸ“‹</span> Danh má»¥c DV
      </a>
      <a *ngIf="isAdmin()" routerLink="/forms" routerLinkActive="active" class="nav-item">
        <span class="icon">ğŸ“</span> Biá»ƒu máº«u
      </a>
      <a
        *ngIf="isAdmin()"
        routerLink="/forms/categories"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ“</span> Danh má»¥c BM
      </a>
      <a
        *ngIf="canView('ViewAuditLog')"
        routerLink="/admin/audit-logs"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ“</span> Nháº­t kÃ½
      </a>
      <a
        *ngIf="isAdmin()"
        routerLink="/admin/notifications"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ””</span> ThÃ´ng bÃ¡o
      </a>
      <a
        *ngIf="isAdmin()"
        routerLink="/admin/digital-signing"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ”</span> KÃ½ sá»‘
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="user-info">
        <span class="avatar">{{ getUserInitials() }}</span>
        <div class="user-details">
          <strong>{{ authService.user()?.fullName }}</strong>
          <small>{{ authService.user()?.role }}</small>
        </div>
      </div>
      <button class="btn-logout" (click)="logout()">ğŸšª ÄÄƒng xuáº¥t</button>
    </div>
  </aside>

  <div class="main-wrapper">
    <header class="top-header">
      <div class="header-left">
        <h1 class="page-title">{{ getPageTitle() }}</h1>
      </div>
      <div class="header-right">
        <app-notification-bell></app-notification-bell>
        <div class="user-avatar">{{ getUserInitials() }}</div>
      </div>
    </header>
    <main class="main-content">
      <router-outlet></router-outlet>
    </main>
  </div>

  <!-- Toast Notifications -->
  <!-- Global Toast Notifications -->
  <app-global-toast></app-global-toast>
</div>

# PostgreSQL WAL & Replication Configuration for IVF System
# This file is mounted into the primary DB container

# WAL Level — required for replication and PITR
wal_level = replica

# WAL Archiving — copies completed WAL segments to archive directory
archive_mode = on
archive_command = 'cp %p /var/lib/postgresql/archive/%f'
archive_timeout = 300

# Replication slots — allow standby connections
max_wal_senders = 5
max_replication_slots = 5

# Keep WAL segments for replication (256MB default retention)
wal_keep_size = 256MB

# Logging
log_replication_commands = on
